<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/reseter.css">
    <link rel="stylesheet" href="/css/choices.min.css"/>
    <link rel="stylesheet" href="/css/site.css"/>
    <title th:if="${action == 'add'}">Добавления объекта</title>
    <title th:if="${action == 'update'}">Обновление объекта</title>
</head>
<body>
<section class="section">
    <div class="burger-menu">
        <div class="burger-menu__line"></div>
    </div>
    <div class="main-container">
        <div class="menu">
            <div class="menu__wrapper">
                <div class="logo">
                    <a href="/" class="logo__link">
                        <div class="logo__wrapper">
                            <div class="logo-icon">
                                <svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="16" cy="16" r="16" fill="#3751FF"/>
                                    <path d="M11 10C11 9.44772 11.4477 9 12 9H15.9905C18.2127 9 19.9333 9.60955 21.1524 10.8287C22.3841 12.0478 23 13.765 23 15.9803C23 18.2088 22.3841 19.9391 21.1524 21.1713C19.9333 22.3904 18.2127 23 15.9905 23H12C11.4477 23 11 22.5523 11 22V10Z"
                                          fill="url(#paint0_linear_584_285)"/>
                                    <defs>
                                        <linearGradient id="paint0_linear_584_285" x1="11" y1="9" x2="23" y2="23"
                                                        gradientUnits="userSpaceOnUse">
                                            <stop stop-color="white" stop-opacity="0.7"/>
                                            <stop offset="1" stop-color="white"/>
                                        </linearGradient>
                                    </defs>
                                </svg>
                            </div>
                            <span class="logo__text">
                            Система управления
                        </span>
                        </div>
                    </a>
                </div>
                <ul class="menu__list">
                    <li class="menu__list-item menu__list-item--orders">
                        <a href="/orders/main" class="menu__link">Заказы</a>
                    </li>
                    <li class="menu__list-item menu__list-item--clients">
                        <a href="/clients/main" class="menu__link">Клиенты</a>
                    </li>
                    <li class="menu__list-item menu__list-item--objects menu__list-item--active">
                        <a href="/objects/main" class="menu__link">Объекты</a>
                    </li>
                    <li class="menu__list-item menu__list-item--employees">
                        <a href="/employees/main" class="menu__link">Рабочие</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="info">
            <div class="info__wrapper">
                <h1 class="info__title info__title--margin-bottom40px" th:if="${action == 'add'}">Добавление
                    объекта</h1>
                <h1 class="info__title info__title--margin-bottom40px" th:if="${action == 'update'}">Обновление
                    объекта</h1>
                <form th:action="@{/objects/new}" th:object="${buildObject}" class="form" method="POST">
                    <input th:if="${action == 'update'}" type="hidden" th:field="*{id}" class="form__input" required>

                    <input th:if="${action == 'update'}" type="hidden" class="form__input" th:field="*{status}">

                    <label class="form__label">Название</label>
                    <input type="text" th:field="*{objectName}" class="form__input" required>

                    <input th:if="${action == 'update'}" type="hidden" class="form__input" name="clientId" th:value="${clientId}">

                    <label th:if="${action == 'add'}" class="form__label">Клиент</label>
                    <select th:if="${action == 'add'}" name="clientId" class="form__input form__select" required>
                        <option th:each="client: ${clients}" th:value="${client.id}" th:text="${client.lastName} + ' ' + ${client.firstName} + ' ' + ${client.middleName}"></option>
                    </select>

                    <label th:if="${action == 'add'}" class="form__label">Прораб</label>
                    <select th:if="${action == 'add'}" name="foremanId" class="form__input form__select" required>
                        <option th:each="foreman: ${foremanList}" th:value="${foreman.id}" th:text="${foreman.lastName} + ' ' + ${foreman.firstName} + ' ' + ${foreman.middleName}"></option>
                    </select>

                    <label class="form__label">Дата начала работ</label>
                    <input th:attrappend="value=${action == 'update'}?@{${endDateWork}}" type="date" name="startDateWork" class="form__input" required>

                    <label class="form__label">Дата окончания работ</label>
                    <input th:attrappend="value=${action == 'update'}?@{${endDateWork}}" type="date" name="endDateWork" class="form__input" required>

                    <label class="form__label">Категория</label>
                    <select name="category" class="form__input form__select" required>
                        <option th:attrappend="selected=${category == 'Жилой объект'}?@{selected}" >Жилой объект</option>
                        <option th:attrappend="selected=${category == 'Нежилой объект'}?@{selected}">Нежилой объект</option>
                    </select>

                    <label class="form__label">Стоимость работ</label>
                    <input th:field="*{price}" type="number" class="form__input" required>

                    <label class="form__label">Телефон</label>
                    <input type="text" th:field="*{phone}" class="form__input mask-phone" required>

                    <label class="form__label">Индекс</label>
                    <input type="text" th:field="*{indexRegion}" class="form__input mask-index" required>

                    <label class="form__label">Регион</label>
                    <input type="text" th:field="*{region}" class="form__input" required>

                    <label class="form__label">Город</label>
                    <input type="text" th:field="*{city}" class="form__input" name="City" required>

                    <label class="form__label">Улица</label>
                    <input type="text" th:field="*{street}" class="form__input" required>

                    <label class="form__label">Дом</label>
                    <input th:field="*{home}" type="text" class="form__input" required>

                    <label class="form__label">Квартира</label>
                    <input th:field="*{flat}" type="number" class="form__input">

                    <input th:if="${action == 'update'}" type="submit" name="submit" class="form__submit" value="Изменить">
                    <input th:if="${action == 'add'}" type="submit" name="submit" class="form__submit" value="Добавить">
                </form>
            </div>
        </div>
    </div>
</section>
<script src="/js/jquery.min.js"></script>
<script src="/js/choices.min.js"></script>
<script src="/js/jquery.maskedinput.min.js"></script>
<script src="/js/site.js"></script>
</body>
</html>